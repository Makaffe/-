<nz-modal [(nzVisible)]="isVisible" [nzTitle]="'问题拆分详情'" [nzMaskClosable]="false" (nzOnCancel)="handleCancel()"
  [nzFooter]="footer" [nzStyle]="{ top: '65px' }" nzWidth="1200" [nzBodyStyle]="{
    'min-height': '300px',
    'overflow-x': 'hidden',
    padding: '24px 24px 0 24px'
  }">

  <form nz-form #form="ngForm">
    <nz-form-item>
      <nz-form-label nzSpan="2">问题名称</nz-form-label>
      <nz-form-control nzSpan="10">
        <input nz-input name="name" readonly [value]="problemItem?.name" />
      </nz-form-control>
      <nz-form-label nzSpan="2">问题类型</nz-form-label>
      <nz-form-control nzSpan="10">
        <input nz-input name="type" [value]="problemItem?.type | dictTransform: 'PROBLEM_TYPE' | async" readonly />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzSpan="2">问题描述</nz-form-label>
      <nz-form-control nzSpan="22">
        <textarea nz-input name="remark" [value]="problemItem?.remark" readonly></textarea>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzSpan="2">子问题</nz-form-label>
      <nz-form-control nzSpan="22">
        <nz-table #editRowTable nzBordered [nzData]="childrenProblemList" [nzScroll]="{ x: '1800px', y: '100%' }"
          [nzShowPagination]="false" style="height: 300px;">
          <thead>
            <tr>
              <th nzWidth="50px" nzLeft="0px">序号</th>
              <th nzWidth="150px">子问题名称</th>
              <th nzWidth="200px">子问题描述</th>
              <th nzWidth="200px">子问题审计建议</th>
              <th nzWidth="100px">子问题类型</th>
              <th nzWidth="100px">子问题整改部门</th>
              <th nzWidth="100px">子问题整改负责人</th>
              <th nzWidth="120px" nzRight="0px" nzAlign="center">
                操作
                <button nz-button nzType="primary" nzSize="small" (click)="addChildrenProblem()">新增</button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of editRowTable.data; let i = index">
              <td nzLeft="0px">{{ i + 1 }}</td>
              <td>{{ data.name }}</td>
              <td>{{ data.remark }}</td>
              <td>{{ data.advice }}</td>
              <td>{{ data.type | dictTransform: 'PROBLEM_TYPE' | async }}</td>
              <td>{{convertOrganization(data?.rectifyDepartmentId)}}</td>
              <td>{{convertdutyUser(data?.dutyUserId)}}</td>
              <td nzRight="0px" nzAlign="center">
                <a (click)="startEdit(data)">编辑</a>
                <nz-divider nzType="vertical"></nz-divider>
                <nz-popconfirm [nzTitle]="confirmtittle" (nzOnConfirm)="onDelete(data.uuid)">
                  <ng-template #confirmtittle>确定删除该数据？</ng-template>
                  <a nz-popconfirm>删除</a>
                </nz-popconfirm>
              </td>
            </tr>
          </tbody>
        </nz-table>
      </nz-form-control>
    </nz-form-item>
  </form>
  <ng-template #footer>
    <button nz-button nzType="default" (click)="handleCancel()">取消</button>
    <button nz-button nzType="primary" [nzLoading]="loading" (click)="save()">
      确定
    </button>
  </ng-template>
</nz-modal>
<!-- 
子问题详情组件 -->
<app-rectify-child-issue-detail #rectifyChildIssueDetailComponent [problemItem]="problemItem"
  (dataChange)="getChildrenProblem($event)">
</app-rectify-child-issue-detail>
